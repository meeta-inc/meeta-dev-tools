# AI Navi Chat API Test Automation

PactumJS ê¸°ë°˜ì˜ AI Navi Chat API í…ŒìŠ¤íŠ¸ ìë™í™” ë„êµ¬ì…ë‹ˆë‹¤.

## ğŸš€ ì£¼ìš” ê¸°ëŠ¥

- **ë‹¤ì–‘í•œ í…ŒìŠ¤íŠ¸ ì†ŒìŠ¤**: CSV, Excel, Google Sheetsì—ì„œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ë¡œë“œ
- **í•™ë…„ë³„ í…ŒìŠ¤íŠ¸**: preschool, elementary, middle, high í•™ë…„ë³„ í•„í„°ë§
- **ë³‘ë ¬ ì‹¤í–‰**: ì„¤ì • ê°€ëŠ¥í•œ ë™ì‹œì„±ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì„±ëŠ¥ ìµœì í™”
- **ìë™ ë³´ê³ **: S3 ì—…ë¡œë“œ, Slack ì•Œë¦¼, êµ¬ì¡°í™”ëœ ë¡œê¹…
- **ì‘ë‹µ ê²€ì¦**: API ì‘ë‹µ í˜•ì‹ ìë™ ê²€ì¦

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
pactumjs_test_new/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                  # API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â”œâ”€â”€ client.js         # AI Navi Chat API í´ë¼ì´ì–¸íŠ¸
â”‚   â”‚   â””â”€â”€ Academy Management API-prd-1-oas30.json
â”‚   â”œâ”€â”€ data/                 # í…ŒìŠ¤íŠ¸ ë°ì´í„°
â”‚   â”‚   â”œâ”€â”€ csv/              # CSV í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
â”‚   â”‚   â”œâ”€â”€ json/             # JSON í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
â”‚   â”‚   â””â”€â”€ test-case-loader.js
â”‚   â”œâ”€â”€ integrations/         # ì™¸ë¶€ ì„œë¹„ìŠ¤ ì—°ë™
â”‚   â”‚   â”œâ”€â”€ gsheet/           # Google Sheets
â”‚   â”‚   â”œâ”€â”€ s3/               # AWS S3
â”‚   â”‚   â””â”€â”€ slack/            # Slack ì•Œë¦¼
â”‚   â”œâ”€â”€ tests/                # í…ŒìŠ¤íŠ¸ ê´€ë ¨
â”‚   â”‚   â”œâ”€â”€ chat/             # Chat API í…ŒìŠ¤íŠ¸
â”‚   â”‚   â””â”€â”€ utils/            # í…ŒìŠ¤íŠ¸ ìœ í‹¸ë¦¬í‹°
â”‚   â””â”€â”€ utils/                # ê³µí†µ ìœ í‹¸ë¦¬í‹°
â”‚       â””â”€â”€ logger.js         # êµ¬ì¡°í™”ëœ ë¡œê¹…
â”œâ”€â”€ config/                   # ì„¤ì • íŒŒì¼
â”‚   â””â”€â”€ default.js            # ê¸°ë³¸ ì„¤ì •
â”œâ”€â”€ scripts/                  # ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ run-tests.js          # ë©”ì¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ê¸°
â”‚   â””â”€â”€ upload-to-gsheet.js   # Google Sheets ì—…ë¡œë“œ
â”œâ”€â”€ reports/                  # í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë¦¬í¬íŠ¸
â””â”€â”€ package.json
```

## ğŸ› ï¸ ì„¤ì¹˜ ë° ì„¤ì •

### 1. ì˜ì¡´ì„± ì„¤ì¹˜

```bash
cd pactumjs_test_new
npm install
```

### 2. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •

`.env` íŒŒì¼ì„ ìƒì„±í•˜ê³  ë‹¤ìŒ í™˜ê²½ ë³€ìˆ˜ë“¤ì„ ì„¤ì •í•˜ì„¸ìš”:

```bash
cp .env.example .env
# .env íŒŒì¼ í¸ì§‘
```

### 3. Google Sheets ì¸ì¦ (ì„ íƒì‚¬í•­)

Google Sheetsë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ì„œë¹„ìŠ¤ ê³„ì • JSON íŒŒì¼ì„ `config/service-account.json`ì— ì €ì¥í•˜ì„¸ìš”.

## ğŸ¯ ì‚¬ìš©ë²•

### ê¸°ë³¸ í…ŒìŠ¤íŠ¸ ì‹¤í–‰

```bash
# ëª¨ë“  í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm test

# ë˜ëŠ” ì§ì ‘ ì‹¤í–‰
node scripts/run-tests.js
```

### í•„í„°ë§ ì˜µì…˜

```bash
# í•™ë…„ë³„ ì‹¤í–‰
npm run test:grade -- high
node scripts/run-tests.js --grade=high

# ì¹´í…Œê³ ë¦¬ë³„ ì‹¤í–‰
npm run test:category -- A
node scripts/run-tests.js --category=æˆæ¥­

# íŠ¹ì • í…ŒìŠ¤íŠ¸ ì‹¤í–‰
npm run test:id -- HIGH_A_1
node scripts/run-tests.js --id=HIGH_A_1

# ì†ŒìŠ¤ë³„ ì‹¤í–‰
node scripts/run-tests.js --source=excel_faq
```

### S3ì—ì„œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ë¡œë“œ

```bash
node scripts/run-tests.js --from-s3 --bucket=my-bucket --key=test-cases.csv
```

### ê¸°íƒ€ ì˜µì…˜

```bash
# ë“œë¼ì´ëŸ° (ì‹¤ì œ API í˜¸ì¶œ ì—†ì´ í…ŒìŠ¤íŠ¸)
node scripts/run-tests.js --dry-run

# Slack ì•Œë¦¼ ë¹„í™œì„±í™”
node scripts/run-tests.js --no-slack
```

### Google Sheets ì—…ë¡œë“œ

```bash
# ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ ì—…ë¡œë“œ
node scripts/upload-to-gsheet.js

# ì‚¬ìš©ì ì •ì˜ ì˜µì…˜
node scripts/upload-to-gsheet.js --spreadsheet=YOUR_SHEET_ID --range=Sheet1!A:Z --output=custom-test-cases.csv
```

## ğŸ“Š í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ í˜•ì‹

### CSV í˜•ì‹
```csv
í…ŒìŠ¤íŠ¸ë²ˆí˜¸,ìœ ì €ì—­í• ,ìœ ì €ì•„ì´ë””,í…ŒìŠ¤íŠ¸ì¹´í…Œê³ ë¦¬,ë©”ì„¸ì§€
HIGH_A_1,User_S,test_user_001,æˆæ¥­ãƒ»ã‚«ãƒªã‚­ãƒ¥ãƒ©ãƒ ,å¤§å­¦å—é¨“å¯¾ç­–ã¯ã©ã®ç§‘ç›®ã«å¯¾å¿œã—ã¦ã„ã¾ã™ã‹ï¼Ÿ
```

### Excel í˜•ì‹ (314CommunityFAQExample.xlsx)
- í•™ë…„ë³„ ì‹œíŠ¸: é«˜æ ¡ç”Ÿ, ä¸­å­¦ç”Ÿ, å°å­¦ç”Ÿ, å¹¼å…
- ê° ì‹œíŠ¸ì— ì§ˆë¬¸ê³¼ ì˜ˆìƒ ë‹µë³€ í¬í•¨

## ğŸ”§ ì„¤ì •

### config/default.js

ì£¼ìš” ì„¤ì • ì˜µì…˜:

```javascript
module.exports = {
  api: {
    baseUrl: 'API_BASE_URL',
    timeout: 30000,
    concurrency: 5
  },
  aws: {
    region: 'ap-northeast-1',
    s3: {
      bucket: 'YOUR_BUCKET'
    }
  },
  defaults: {
    clientId: 'AB123456',
    appId: '1234'
  }
}
```

## ğŸ“ˆ ê²°ê³¼ ë° ë¦¬í¬íŒ…

### í…ŒìŠ¤íŠ¸ ê²°ê³¼

- **S3**: CSV í˜•ì‹ìœ¼ë¡œ ìë™ ì—…ë¡œë“œ
- **ë¡œì»¬**: `reports/` ë””ë ‰í† ë¦¬ì— JSON í˜•ì‹ ì €ì¥
- **Slack**: ì‹¤ì‹œê°„ ì•Œë¦¼ ë° ìš”ì•½ ë¦¬í¬íŠ¸

### ë¡œê·¸

- **combined.log**: ëª¨ë“  ë¡œê·¸
- **error.log**: ì—ëŸ¬ ë¡œê·¸ë§Œ
- **ì½˜ì†”**: ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™©

## ğŸš¦ API ìŠ¤í™

í˜„ì¬ ì§€ì›í•˜ëŠ” AI Navi Chat API:

```
POST /students/chat
{
  "clientId": "AB123456",    // 8ìë¦¬ (2ë¬¸ì + 6ìˆ«ì)
  "appId": "1234",           // 4ìë¦¬
  "gradeId": "high",         // preschool|elementary|middle|high
  "userId": "user_001",
  "message": "ì§ˆë¬¸ ë‚´ìš©",
  "sessionId": "optional"
}
```

### ì‘ë‹µ í˜•ì‹

```json
[
  {
    "type": "main",
    "text": "ì£¼ìš” ë‹µë³€ ë‚´ìš©"
  },
  {
    "type": "sub", 
    "text": "ë¶€ê°€ ì„¤ëª…"
  },
  {
    "type": "cta",
    "text": "í–‰ë™ ìœ ë„ ë©”ì‹œì§€"
  }
]
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê²€ì¦

ê° í…ŒìŠ¤íŠ¸ëŠ” ë‹¤ìŒì„ ê²€ì¦í•©ë‹ˆë‹¤:

- HTTP ì‘ë‹µ ì½”ë“œ (200 OK)
- ì‘ë‹µ ë³¸ë¬¸ í˜•ì‹ (ë°°ì—´ í˜•íƒœ)
- ë²„ë¸” ê°œìˆ˜ (2-3ê°œ)
- ê° ë²„ë¸”ì˜ íƒ€ì…ê³¼ í…ìŠ¤íŠ¸ ì¡´ì¬

## ğŸ“ ê°œë°œ

### ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ì¶”ê°€

1. CSV íŒŒì¼ì— ì§ì ‘ ì¶”ê°€
2. Excel íŒŒì¼ ì—…ë°ì´íŠ¸
3. Google Sheetsì—ì„œ ê´€ë¦¬

### ìƒˆë¡œìš´ API ì—”ë“œí¬ì¸íŠ¸ ì§€ì›

1. `src/api/client.js`ì—ì„œ ë©”ì„œë“œ ì¶”ê°€
2. `scripts/run-tests.js`ì—ì„œ í…ŒìŠ¤íŠ¸ ë¡œì§ êµ¬í˜„

## ğŸ¯ ì„±ëŠ¥ ìµœì í™”

- **ë³‘ë ¬ ì²˜ë¦¬**: ê¸°ë³¸ 5ê°œ ë™ì‹œ ì‹¤í–‰ (ì„¤ì • ê°€ëŠ¥)
- **íƒ€ì„ì•„ì›ƒ**: 30ì´ˆ API íƒ€ì„ì•„ì›ƒ
- **ì¬ì‹œë„**: ì‹¤íŒ¨ì‹œ 3íšŒ ì¬ì‹œë„
- **ë¡œê¹…**: êµ¬ì¡°í™”ëœ ë¡œê¹…ìœ¼ë¡œ ì„±ëŠ¥ ëª¨ë‹ˆí„°ë§

## ğŸ” ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ì˜¤ë¥˜

1. **ì¸ì¦ ì˜¤ë¥˜**: AWS ìê²© ì¦ëª… ë° Google Sheets ì„¤ì • í™•ì¸
2. **íƒ€ì„ì•„ì›ƒ**: API ì‘ë‹µ ì‹œê°„ í™•ì¸, íƒ€ì„ì•„ì›ƒ ê°’ ì¡°ì •
3. **í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ ë¡œë“œ ì‹¤íŒ¨**: íŒŒì¼ ê²½ë¡œ ë° í˜•ì‹ í™•ì¸

### ë¡œê·¸ í™•ì¸

```bash
# ì—ëŸ¬ ë¡œê·¸ í™•ì¸
tail -f reports/logs/error.log

# ì „ì²´ ë¡œê·¸ í™•ì¸  
tail -f reports/logs/combined.log
```

## ğŸ“ ì§€ì›

ë¬¸ì œê°€ ë°œìƒí•˜ë©´ ë‹¤ìŒì„ í™•ì¸í•˜ì„¸ìš”:

1. í™˜ê²½ ë³€ìˆ˜ ì„¤ì •
2. ë„¤íŠ¸ì›Œí¬ ì—°ê²°
3. API ì—”ë“œí¬ì¸íŠ¸ ìƒíƒœ
4. ë¡œê·¸ íŒŒì¼ì˜ ìƒì„¸ ì˜¤ë¥˜ ë©”ì‹œì§€